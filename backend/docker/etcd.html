<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä½¿ç”¨ Docker æ­å»º ETCD | åœ¨è·¯ä¸Š</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/logo.png">
    <mata name="author" content="åœ¨è·¯ä¸Š"></mata>
    <mata name="Keyword" content="æˆ‘çš„åšå®¢"></mata>
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="descriptionæè¿°">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.5bae31cc.css" as="style"><link rel="preload" href="/assets/js/app.05d870f8.js" as="script"><link rel="preload" href="/assets/js/2.8154945c.js" as="script"><link rel="preload" href="/assets/js/18.b4b40293.js" as="script"><link rel="preload" href="/assets/js/3.4234061e.js" as="script"><link rel="prefetch" href="/assets/js/10.14b22f93.js"><link rel="prefetch" href="/assets/js/100.3e73319c.js"><link rel="prefetch" href="/assets/js/101.1685da8c.js"><link rel="prefetch" href="/assets/js/102.be61dc9c.js"><link rel="prefetch" href="/assets/js/103.b0ed0e73.js"><link rel="prefetch" href="/assets/js/104.1788d6c5.js"><link rel="prefetch" href="/assets/js/11.97d54b7d.js"><link rel="prefetch" href="/assets/js/12.d1459a98.js"><link rel="prefetch" href="/assets/js/13.dfdc98f8.js"><link rel="prefetch" href="/assets/js/14.c83614c0.js"><link rel="prefetch" href="/assets/js/15.2abdd438.js"><link rel="prefetch" href="/assets/js/16.f22695ab.js"><link rel="prefetch" href="/assets/js/17.38072a2b.js"><link rel="prefetch" href="/assets/js/19.4a1f7148.js"><link rel="prefetch" href="/assets/js/20.bd835252.js"><link rel="prefetch" href="/assets/js/21.fbfa6242.js"><link rel="prefetch" href="/assets/js/22.a894fc70.js"><link rel="prefetch" href="/assets/js/23.85cbb46b.js"><link rel="prefetch" href="/assets/js/24.09883a99.js"><link rel="prefetch" href="/assets/js/25.21248724.js"><link rel="prefetch" href="/assets/js/26.88b8c4ec.js"><link rel="prefetch" href="/assets/js/27.f5eda7d1.js"><link rel="prefetch" href="/assets/js/28.83dc6bf8.js"><link rel="prefetch" href="/assets/js/29.1b72d6de.js"><link rel="prefetch" href="/assets/js/30.683f47fb.js"><link rel="prefetch" href="/assets/js/31.0a3d143d.js"><link rel="prefetch" href="/assets/js/32.9964a42e.js"><link rel="prefetch" href="/assets/js/33.5922177d.js"><link rel="prefetch" href="/assets/js/34.884c77f8.js"><link rel="prefetch" href="/assets/js/35.70c37a36.js"><link rel="prefetch" href="/assets/js/36.30f006ab.js"><link rel="prefetch" href="/assets/js/37.52d9592e.js"><link rel="prefetch" href="/assets/js/38.236f6f1d.js"><link rel="prefetch" href="/assets/js/39.df53a660.js"><link rel="prefetch" href="/assets/js/4.364dea52.js"><link rel="prefetch" href="/assets/js/40.2983f094.js"><link rel="prefetch" href="/assets/js/41.332aa290.js"><link rel="prefetch" href="/assets/js/42.8e4f216f.js"><link rel="prefetch" href="/assets/js/43.db4b18da.js"><link rel="prefetch" href="/assets/js/44.2ec763e5.js"><link rel="prefetch" href="/assets/js/45.6469b764.js"><link rel="prefetch" href="/assets/js/46.660a0f01.js"><link rel="prefetch" href="/assets/js/47.338a5418.js"><link rel="prefetch" href="/assets/js/48.fa9157e3.js"><link rel="prefetch" href="/assets/js/49.997112f7.js"><link rel="prefetch" href="/assets/js/5.0e72a8e9.js"><link rel="prefetch" href="/assets/js/50.05f1be4b.js"><link rel="prefetch" href="/assets/js/51.9c28cdfa.js"><link rel="prefetch" href="/assets/js/52.0be03ca9.js"><link rel="prefetch" href="/assets/js/53.62734f7b.js"><link rel="prefetch" href="/assets/js/54.d88fb9ae.js"><link rel="prefetch" href="/assets/js/55.09186428.js"><link rel="prefetch" href="/assets/js/56.73464fbf.js"><link rel="prefetch" href="/assets/js/57.ff912441.js"><link rel="prefetch" href="/assets/js/58.b98735ba.js"><link rel="prefetch" href="/assets/js/59.6926ed2d.js"><link rel="prefetch" href="/assets/js/6.d3ecc9b3.js"><link rel="prefetch" href="/assets/js/60.96110eaf.js"><link rel="prefetch" href="/assets/js/61.394f97da.js"><link rel="prefetch" href="/assets/js/62.c97fd3ef.js"><link rel="prefetch" href="/assets/js/63.88ebd405.js"><link rel="prefetch" href="/assets/js/64.24b24675.js"><link rel="prefetch" href="/assets/js/65.28f87ae1.js"><link rel="prefetch" href="/assets/js/66.54dc0506.js"><link rel="prefetch" href="/assets/js/67.1d5d22f7.js"><link rel="prefetch" href="/assets/js/68.7124f767.js"><link rel="prefetch" href="/assets/js/69.47fc9fcc.js"><link rel="prefetch" href="/assets/js/7.fa4ab570.js"><link rel="prefetch" href="/assets/js/70.6d4bcfd6.js"><link rel="prefetch" href="/assets/js/71.1062fc38.js"><link rel="prefetch" href="/assets/js/72.736a5d68.js"><link rel="prefetch" href="/assets/js/73.e7c27749.js"><link rel="prefetch" href="/assets/js/74.d437f9c8.js"><link rel="prefetch" href="/assets/js/75.fbac1063.js"><link rel="prefetch" href="/assets/js/76.e73e63ca.js"><link rel="prefetch" href="/assets/js/77.c303b03b.js"><link rel="prefetch" href="/assets/js/78.6a82fa23.js"><link rel="prefetch" href="/assets/js/79.8d787e88.js"><link rel="prefetch" href="/assets/js/8.76666434.js"><link rel="prefetch" href="/assets/js/80.822f4cf2.js"><link rel="prefetch" href="/assets/js/81.03025255.js"><link rel="prefetch" href="/assets/js/82.51f9320c.js"><link rel="prefetch" href="/assets/js/83.e2682388.js"><link rel="prefetch" href="/assets/js/84.b9746516.js"><link rel="prefetch" href="/assets/js/85.a1060367.js"><link rel="prefetch" href="/assets/js/86.9b39ee2d.js"><link rel="prefetch" href="/assets/js/87.79f51dc9.js"><link rel="prefetch" href="/assets/js/88.8dab25cb.js"><link rel="prefetch" href="/assets/js/89.b8d28b75.js"><link rel="prefetch" href="/assets/js/9.5900836f.js"><link rel="prefetch" href="/assets/js/90.9efb05a6.js"><link rel="prefetch" href="/assets/js/91.c2d4b726.js"><link rel="prefetch" href="/assets/js/92.485dd07f.js"><link rel="prefetch" href="/assets/js/93.6c6489e0.js"><link rel="prefetch" href="/assets/js/94.f39d3f5b.js"><link rel="prefetch" href="/assets/js/95.6d784451.js"><link rel="prefetch" href="/assets/js/96.59a932d4.js"><link rel="prefetch" href="/assets/js/97.a8b278b7.js"><link rel="prefetch" href="/assets/js/98.c10d1295.js"><link rel="prefetch" href="/assets/js/99.95358c3f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5bae31cc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="åœ¨è·¯ä¸Š" class="logo"> <span class="site-name can-hide">åœ¨è·¯ä¸Š</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ¡†æ¶" class="dropdown-title"><span class="title">æ¡†æ¶</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ¡†æ¶" class="mobile-dropdown-title"><span class="title">æ¡†æ¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Spring
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/" class="nav-link">
  Home
</a></li><li class="dropdown-subitem"><a href="/about/" class="nav-link">
  About
</a></li></ul></li><li class="dropdown-item"><h4>
          Mybatis
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/" class="nav-link">
  Home
</a></li><li class="dropdown-subitem"><a href="/about/" class="nav-link">
  About
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç³»ç»Ÿ" class="dropdown-title"><span class="title">ç³»ç»Ÿ</span> <span class="arrow down"></span></button> <button type="button" aria-label="ç³»ç»Ÿ" class="mobile-dropdown-title"><span class="title">ç³»ç»Ÿ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/os/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/os/ubuntu/" class="nav-link">
  Ubuntu
</a></li><li class="dropdown-item"><!----> <a href="/os/centos/" class="nav-link">
  CentOS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åç«¯" class="dropdown-title"><span class="title">åç«¯</span> <span class="arrow down"></span></button> <button type="button" aria-label="åç«¯" class="mobile-dropdown-title"><span class="title">åç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/backend/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/backend/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/backend/docker/" class="nav-link router-link-active">
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¼€å‘å·¥å…·" class="dropdown-title"><span class="title">å¼€å‘å·¥å…·</span> <span class="arrow down"></span></button> <button type="button" aria-label="å¼€å‘å·¥å…·" class="mobile-dropdown-title"><span class="title">å¼€å‘å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/github/" class="nav-link">
  Github
</a></li><li class="dropdown-item"><!----> <a href="/tools/vscode/" class="nav-link">
  VSCode
</a></li><li class="dropdown-item"><!----> <a href="/tools/bookmark-scripts/" class="nav-link">
  Bookmark scripts
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ›´å¤š" class="dropdown-title"><span class="title">æ›´å¤š</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ›´å¤š" class="mobile-dropdown-title"><span class="title">æ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/more/navigation.html" class="nav-link">
  å¯¼èˆª ğŸ‰
</a></li><li class="dropdown-item"><!----> <a href="https://shanyuhai123.github.io/vuepress-plugin-auto-sidebar/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress ä¾§è¾¹æ æ’ä»¶
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress å®˜ç½‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ¡†æ¶" class="dropdown-title"><span class="title">æ¡†æ¶</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ¡†æ¶" class="mobile-dropdown-title"><span class="title">æ¡†æ¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Spring
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/" class="nav-link">
  Home
</a></li><li class="dropdown-subitem"><a href="/about/" class="nav-link">
  About
</a></li></ul></li><li class="dropdown-item"><h4>
          Mybatis
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/" class="nav-link">
  Home
</a></li><li class="dropdown-subitem"><a href="/about/" class="nav-link">
  About
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç³»ç»Ÿ" class="dropdown-title"><span class="title">ç³»ç»Ÿ</span> <span class="arrow down"></span></button> <button type="button" aria-label="ç³»ç»Ÿ" class="mobile-dropdown-title"><span class="title">ç³»ç»Ÿ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/os/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/os/ubuntu/" class="nav-link">
  Ubuntu
</a></li><li class="dropdown-item"><!----> <a href="/os/centos/" class="nav-link">
  CentOS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åç«¯" class="dropdown-title"><span class="title">åç«¯</span> <span class="arrow down"></span></button> <button type="button" aria-label="åç«¯" class="mobile-dropdown-title"><span class="title">åç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/backend/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/backend/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/backend/docker/" class="nav-link router-link-active">
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¼€å‘å·¥å…·" class="dropdown-title"><span class="title">å¼€å‘å·¥å…·</span> <span class="arrow down"></span></button> <button type="button" aria-label="å¼€å‘å·¥å…·" class="mobile-dropdown-title"><span class="title">å¼€å‘å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/github/" class="nav-link">
  Github
</a></li><li class="dropdown-item"><!----> <a href="/tools/vscode/" class="nav-link">
  VSCode
</a></li><li class="dropdown-item"><!----> <a href="/tools/bookmark-scripts/" class="nav-link">
  Bookmark scripts
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ›´å¤š" class="dropdown-title"><span class="title">æ›´å¤š</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ›´å¤š" class="mobile-dropdown-title"><span class="title">æ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/more/navigation.html" class="nav-link">
  å¯¼èˆª ğŸ‰
</a></li><li class="dropdown-item"><!----> <a href="https://shanyuhai123.github.io/vuepress-plugin-auto-sidebar/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress ä¾§è¾¹æ æ’ä»¶
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress å®˜ç½‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Docker</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/docker/" aria-current="page" class="sidebar-link">äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨ Docker</a></li><li><a href="/backend/docker/dockerfile.html" class="sidebar-link">Dockerfile è¯¦è§£</a></li><li><a href="/backend/docker/image.html" class="sidebar-link">äº†è§£ Docker é•œåƒ</a></li><li><a href="/backend/docker/container.html" class="sidebar-link">äº†è§£ Docker å®¹å™¨</a></li><li><a href="/backend/docker/volumes.html" class="sidebar-link">äº†è§£ Docker æ•°æ®å·</a></li><li><a href="/backend/docker/docker-compose.html" class="sidebar-link">Docker Compose ç®¡ç†å¤šä¸ªæœåŠ¡</a></li><li><a href="/backend/docker/etcd.html" aria-current="page" class="active sidebar-link">ä½¿ç”¨ Docker æ­å»º ETCD</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/docker/etcd.html#etcd-åŸºç¡€æ¦‚å¿µ" class="sidebar-link">ETCD åŸºç¡€æ¦‚å¿µ</a></li><li class="sidebar-sub-header"><a href="/backend/docker/etcd.html#éƒ¨ç½²-etcd" class="sidebar-link">éƒ¨ç½² ETCD</a></li><li class="sidebar-sub-header"><a href="/backend/docker/etcd.html#æ•°æ®" class="sidebar-link">æ•°æ®</a></li><li class="sidebar-sub-header"><a href="/backend/docker/etcd.html#å¤„ç†é—®é¢˜" class="sidebar-link">å¤„ç†é—®é¢˜</a></li></ul></li><li><a href="/backend/docker/private-registry.html" class="sidebar-link">ä½¿ç”¨ Harbor æ„å»ºç§æœ‰é•œåƒä»“åº“</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ä½¿ç”¨-docker-æ­å»º-etcd"><a href="#ä½¿ç”¨-docker-æ­å»º-etcd" class="header-anchor">#</a> ä½¿ç”¨ Docker æ­å»º ETCD</h1> <h2 id="etcd-åŸºç¡€æ¦‚å¿µ"><a href="#etcd-åŸºç¡€æ¦‚å¿µ" class="header-anchor">#</a> ETCD åŸºç¡€æ¦‚å¿µ</h2> <ul><li>Raftï¼šetcd æ‰€é‡‡ç”¨çš„ä¿è¯åˆ†å¸ƒå¼ç³»ç»Ÿå¼ºä¸€è‡´æ€§çš„ç®—æ³•</li> <li>Nodeï¼šä¸€ä¸ª Raft çŠ¶æ€å®ä¾‹æœº</li> <li>Memberï¼šä¸€ä¸ª etcd å®ä¾‹ã€‚å®ƒç®¡ç†ç€ä¸€ä¸ª Nodeï¼Œå¹¶ä¸”å¯ä»¥ä¸ºå®¢æˆ·ç«¯è¯·æ±‚æä¾›æœåŠ¡</li> <li>Clusterï¼šç”±å¤šä¸ª Member æ„æˆå¯ä»¥ååŒå·¥ä½œçš„ etcd é›†ç¾¤</li> <li>Peerï¼šå¯¹åŒä¸€ä¸ª etcd é›†ç¾¤ä¸­çš„å¦å¤–ä¸€ä¸ª Member çš„ç§°å‘¼</li> <li>Clientï¼šå‘ etcd é›†ç¾¤å‘é€ HTTP è¯·æ±‚çš„å®¢æˆ·ç«¯</li> <li>WALï¼šé¢„å†™å¼æ—¥å¿—ï¼Œetcd ç”¨äºæŒä¹…åŒ–å­˜å‚¨çš„æ—¥å¿—æ ¼å¼</li> <li>snapshotï¼šetcd é˜²æ­¢ WAL æ–‡ä»¶è¿‡å¤šè€Œè®¾ç½®çš„å¿«ç…§ï¼Œå­˜å‚¨ etcd æ•°æ®çŠ¶æ€</li> <li>Proxyï¼šetcd çš„ä¸€ç§æ¨¡å¼ï¼Œä¸º etcd é›†ç¾¤æä¾›åå‘ä»£ç†æœåŠ¡</li> <li>Leaderï¼šRaft ç®—æ³•ä¸­é€šè¿‡ç«é€‰è€Œäº§ç”Ÿçš„å¤„ç†æ‰€æœ‰æ•°æ®çš„èŠ‚ç‚¹</li> <li>Followerï¼šç«é€‰å¤±è´¥çš„èŠ‚ç‚¹ä½œä¸º Raft ä¸­çš„ä»å±èŠ‚ç‚¹ï¼Œä¸ºç®—æ³•æä¾›å¼ºä¸€è‡´æ€§ä¿è¯</li> <li>Candidateï¼šå½“ Follower è¶…è¿‡ä¸€å®šæ—¶é—´æ¥æ”¶ä¸åˆ° Leader çš„å¿ƒè·³æ—¶è½¬å˜ä¸º Candidate å¼€å§‹ç«é€‰</li> <li>Termï¼šæŸä¸ªèŠ‚ç‚¹æˆä¸º Leader åˆ°ä¸‹ä¸€æ¬¡ç«é€‰æ—¶é—´ï¼Œç§°ä¸ºä¸€ä¸ª Term</li> <li>Indexï¼šæ•°æ®é¡¹ç¼–å·ã€‚Raft ä¸­é€šè¿‡ Term å’Œ Index æ¥å®šä½æ•°æ®</li></ul> <h2 id="éƒ¨ç½²-etcd"><a href="#éƒ¨ç½²-etcd" class="header-anchor">#</a> éƒ¨ç½² ETCD</h2> <p>åœ¨éƒ¨ç½²æ—¶ï¼Œä¸ç¡®å®šå…¶ä»–æˆå‘˜ IP æ˜¯å¸¸è§çš„ï¼Œå¯ä»¥ä½¿ç”¨<a href="https://etcd.io/docs/v3.4.0/dev-internal/discovery_protocol/" target="_blank" rel="noopener noreferrer">åŠ¨æ€å‘ç°<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>çš„æ–¹å¼è§£å†³ã€‚</p> <h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="header-anchor">#</a> å‡†å¤‡</h3> <p>æ‹‰å–é•œåƒï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> pull bitnami/etcd:3.4.14
</code></pre></div><p>ç¡®è®¤ ETCD èŠ‚ç‚¹æ•°é‡ï¼Œä¾‹å¦‚ä¸‰ä¸ªï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">curl</span> https://discovery.etcd.io/new?size<span class="token operator">=</span><span class="token number">3</span>
<span class="token comment"># https://discovery.etcd.io/fbcc7b00dbd102b74d8daa1781fbb941</span>
</code></pre></div><p>ç¯å¢ƒå˜é‡ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">REGISTRY</span><span class="token operator">=</span>bitnami/etcd
<span class="token assign-left variable">ETCD_VERSION</span><span class="token operator">=</span><span class="token number">3.4</span>.14
<span class="token assign-left variable">TOKEN</span><span class="token operator">=</span>etcd-token
<span class="token assign-left variable">CLUSTER_STATE</span><span class="token operator">=</span>new
<span class="token assign-left variable">NAME_1</span><span class="token operator">=</span>etcd-n1
<span class="token assign-left variable">NAME_2</span><span class="token operator">=</span>etcd-n2
<span class="token assign-left variable">NAME_3</span><span class="token operator">=</span>etcd-n3
<span class="token assign-left variable">HOST_1</span><span class="token operator">=</span><span class="token number">10.0</span>.0.137
<span class="token assign-left variable">HOST_2</span><span class="token operator">=</span><span class="token number">10.0</span>.0.138
<span class="token assign-left variable">HOST_3</span><span class="token operator">=</span><span class="token number">10.0</span>.0.139
<span class="token assign-left variable">DISCOVERY</span><span class="token operator">=</span>https://discovery.etcd.io/fbcc7b00dbd102b74d8daa1781fbb941
</code></pre></div><h3 id="åŸºäº-ip-éƒ¨ç½²"><a href="#åŸºäº-ip-éƒ¨ç½²" class="header-anchor">#</a> åŸºäº IP éƒ¨ç½²</h3> <p><code>node1</code>ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> stop etcd <span class="token operator">&amp;&amp;</span> <span class="token function">docker</span> <span class="token function">rm</span> etcd
<span class="token assign-left variable">THIS_NAME</span><span class="token operator">=</span><span class="token variable">${NAME_1}</span>
<span class="token assign-left variable">THIS_IP</span><span class="token operator">=</span><span class="token variable">${HOST_1}</span>
<span class="token function">docker</span> run <span class="token parameter variable">--name</span> etcd <span class="token parameter variable">-d</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-p</span> <span class="token number">2379</span>:2379 <span class="token punctuation">\</span>
  <span class="token parameter variable">-p</span> <span class="token number">2380</span>:2380 <span class="token punctuation">\</span>
  <span class="token parameter variable">--env</span> <span class="token assign-left variable">ALLOW_NONE_AUTHENTICATION</span><span class="token operator">=</span>yes <span class="token punctuation">\</span>
  <span class="token parameter variable">--env</span> <span class="token assign-left variable">ETCD_LISTEN_CLIENT_URLS</span><span class="token operator">=</span>http://0.0.0.0:2379 <span class="token punctuation">\</span>
  <span class="token parameter variable">--env</span> <span class="token assign-left variable">ETCD_ADVERTISE_CLIENT_URLS</span><span class="token operator">=</span>http://<span class="token variable">${THIS_IP}</span>:2379 <span class="token punctuation">\</span>
  <span class="token variable">${REGISTRY}</span><span class="token builtin class-name">:</span><span class="token variable">${ETCD_VERSION}</span> <span class="token punctuation">\</span>
   etcd <span class="token punctuation">\</span>
    <span class="token parameter variable">--name</span> <span class="token variable">${THIS_NAME}</span> <span class="token punctuation">\</span>
    --initial-advertise-peer-urls http://<span class="token variable">${THIS_IP}</span>:2380 --listen-peer-urls http://0.0.0.0:2380 <span class="token punctuation">\</span>
   <span class="token parameter variable">--discovery</span> <span class="token variable">${DISCOVERY}</span> <span class="token punctuation">\</span>
   --initial-cluster-state <span class="token variable">${CLUSTER_STATE}</span> --initial-cluster-token <span class="token variable">${TOKEN}</span>
</code></pre></div><p><code>node2</code>ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> stop etcd <span class="token operator">&amp;&amp;</span> <span class="token function">docker</span> <span class="token function">rm</span> etcd
<span class="token assign-left variable">THIS_NAME</span><span class="token operator">=</span><span class="token variable">${NAME_2}</span>
<span class="token assign-left variable">THIS_IP</span><span class="token operator">=</span><span class="token variable">${HOST_2}</span>
<span class="token function">docker</span> run <span class="token parameter variable">--name</span> etcd <span class="token parameter variable">-d</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-p</span> <span class="token number">2379</span>:2379 <span class="token punctuation">\</span>
  <span class="token parameter variable">-p</span> <span class="token number">2380</span>:2380 <span class="token punctuation">\</span>
  <span class="token parameter variable">--env</span> <span class="token assign-left variable">ALLOW_NONE_AUTHENTICATION</span><span class="token operator">=</span>yes <span class="token punctuation">\</span>
  <span class="token parameter variable">--env</span> <span class="token assign-left variable">ETCD_LISTEN_CLIENT_URLS</span><span class="token operator">=</span>http://0.0.0.0:2379 <span class="token punctuation">\</span>
  <span class="token parameter variable">--env</span> <span class="token assign-left variable">ETCD_ADVERTISE_CLIENT_URLS</span><span class="token operator">=</span>http://<span class="token variable">${THIS_IP}</span>:2379 <span class="token punctuation">\</span>
  <span class="token variable">${REGISTRY}</span><span class="token builtin class-name">:</span><span class="token variable">${ETCD_VERSION}</span> <span class="token punctuation">\</span>
   etcd <span class="token punctuation">\</span>
    <span class="token parameter variable">--name</span> <span class="token variable">${THIS_NAME}</span> <span class="token punctuation">\</span>
    --initial-advertise-peer-urls http://<span class="token variable">${THIS_IP}</span>:2380 --listen-peer-urls http://0.0.0.0:2380 <span class="token punctuation">\</span>
   <span class="token parameter variable">--discovery</span> <span class="token variable">${DISCOVERY}</span> <span class="token punctuation">\</span>
   --initial-cluster-state <span class="token variable">${CLUSTER_STATE}</span> --initial-cluster-token <span class="token variable">${TOKEN}</span>
</code></pre></div><p><code>node3</code>ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> stop etcd <span class="token operator">&amp;&amp;</span> <span class="token function">docker</span> <span class="token function">rm</span> etcd
<span class="token assign-left variable">THIS_NAME</span><span class="token operator">=</span><span class="token variable">${NAME_3}</span>
<span class="token assign-left variable">THIS_IP</span><span class="token operator">=</span><span class="token variable">${HOST_3}</span>
<span class="token function">docker</span> run <span class="token parameter variable">--name</span> etcd <span class="token parameter variable">-d</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-p</span> <span class="token number">2379</span>:2379 <span class="token punctuation">\</span>
  <span class="token parameter variable">-p</span> <span class="token number">2380</span>:2380 <span class="token punctuation">\</span>
  <span class="token parameter variable">--env</span> <span class="token assign-left variable">ALLOW_NONE_AUTHENTICATION</span><span class="token operator">=</span>yes <span class="token punctuation">\</span>
  <span class="token parameter variable">--env</span> <span class="token assign-left variable">ETCD_LISTEN_CLIENT_URLS</span><span class="token operator">=</span>http://0.0.0.0:2379 <span class="token punctuation">\</span>
  <span class="token parameter variable">--env</span> <span class="token assign-left variable">ETCD_ADVERTISE_CLIENT_URLS</span><span class="token operator">=</span>http://<span class="token variable">${THIS_IP}</span>:2379 <span class="token punctuation">\</span>
  <span class="token variable">${REGISTRY}</span><span class="token builtin class-name">:</span><span class="token variable">${ETCD_VERSION}</span> <span class="token punctuation">\</span>
   etcd <span class="token punctuation">\</span>
    <span class="token parameter variable">--name</span> <span class="token variable">${THIS_NAME}</span> <span class="token punctuation">\</span>
    --initial-advertise-peer-urls http://<span class="token variable">${THIS_IP}</span>:2380 --listen-peer-urls http://0.0.0.0:2380 <span class="token punctuation">\</span>
   <span class="token parameter variable">--discovery</span> <span class="token variable">${DISCOVERY}</span> <span class="token punctuation">\</span>
   --initial-cluster-state <span class="token variable">${CLUSTER_STATE}</span> --initial-cluster-token <span class="token variable">${TOKEN}</span>
</code></pre></div><h3 id="åŸºäº-dns-éƒ¨ç½²"><a href="#åŸºäº-dns-éƒ¨ç½²" class="header-anchor">#</a> åŸºäº DNS éƒ¨ç½²</h3> <p>ç¼–è¾‘ DNS æœåŠ¡å™¨çš„ <code>/etc/dnsmasq.conf</code>ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># etcd åŠ¨æ€å‘ç°</span>
srv-host<span class="token operator">=</span>_etcd-server._tcp.example.com,etcd1.example.com,2380,0,100
srv-host<span class="token operator">=</span>_etcd-server._tcp.example.com,etcd2.example.com,2380,0,100
srv-host<span class="token operator">=</span>_etcd-server._tcp.example.com,etcd3.example.com,2380,0,100
</code></pre></div><p>å†åœ¨ <code>/etc/dnsmasq.hosts</code> å¢åŠ è§£æï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">10.0</span>.0.137 etcd1.example.com
<span class="token number">10.0</span>.0.138 etcd2.example.com
<span class="token number">10.0</span>.0.139 etcd3.example.com
</code></pre></div><p>åœ¨æ¯å°æœåŠ¡å™¨ä¸ŠæŒ‡å®š DNS åéªŒè¯è§£æï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">dig</span> +noall +answer SRV _etcd-server._tcp.example.com
</code></pre></div><p>æ­¤å¤„ä»…ä»¥ <code>node1</code> ç¤ºä¾‹ï¼Œæ³¨ etcd æ–°ç‰ˆæœ¬<a href="https://github.com/etcd-io/etcd/issues/11321" target="_blank" rel="noopener noreferrer">éœ€è¦ HTTPS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œæ‰€ä»¥åˆ‡æ¢ä¸ºæ—§ç‰ˆï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> stop etcd <span class="token operator">&amp;&amp;</span> <span class="token function">docker</span> <span class="token function">rm</span> etcd
<span class="token assign-left variable">ETCD_VERSION</span><span class="token operator">=</span><span class="token number">3.3</span>.15
<span class="token assign-left variable">THIS_NAME</span><span class="token operator">=</span><span class="token variable">${NAME_1}</span>
<span class="token assign-left variable">THIS_URLS</span><span class="token operator">=</span>etcd1.example.com
<span class="token function">docker</span> run <span class="token parameter variable">--name</span> etcd <span class="token parameter variable">-d</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-p</span> <span class="token number">2379</span>:2379 <span class="token punctuation">\</span>
  <span class="token parameter variable">-p</span> <span class="token number">2380</span>:2380 <span class="token punctuation">\</span>
  <span class="token parameter variable">--env</span> <span class="token assign-left variable">ALLOW_NONE_AUTHENTICATION</span><span class="token operator">=</span>yes <span class="token punctuation">\</span>
  <span class="token parameter variable">--env</span> <span class="token assign-left variable">ETCD_DISCOVERY_SRV</span><span class="token operator">=</span>example.com <span class="token punctuation">\</span>
  <span class="token parameter variable">--env</span> <span class="token assign-left variable">ETCD_LISTEN_CLIENT_URLS</span><span class="token operator">=</span>http://0.0.0.0:2379 <span class="token punctuation">\</span>
  <span class="token parameter variable">--env</span> <span class="token assign-left variable">ETCD_ADVERTISE_CLIENT_URLS</span><span class="token operator">=</span>http://<span class="token variable">${THIS_URLS}</span>:2379 <span class="token punctuation">\</span>
  <span class="token variable">${REGISTRY}</span><span class="token builtin class-name">:</span><span class="token variable">${ETCD_VERSION}</span> <span class="token punctuation">\</span>
   etcd <span class="token punctuation">\</span>
    <span class="token parameter variable">--name</span> <span class="token variable">${THIS_NAME}</span> <span class="token punctuation">\</span>
    --initial-advertise-peer-urls http://<span class="token variable">${THIS_URLS}</span>:2380 --listen-peer-urls http://0.0.0.0:2380 <span class="token punctuation">\</span>
   --initial-cluster-state <span class="token variable">${CLUSTER_STATE}</span> --initial-cluster-token <span class="token variable">${TOKEN}</span>
</code></pre></div><h3 id="æ ¡éªŒç»“æœ"><a href="#æ ¡éªŒç»“æœ" class="header-anchor">#</a> æ ¡éªŒç»“æœ</h3> <p>æŸ¥çœ‹é›†ç¾¤æˆå‘˜ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> etcd etcdctl member list

<span class="token comment"># å¾—åˆ°</span>
c45dc290bba2bf1, started, etcd-n1, http://10.0.0.137:2380, http://10.0.0.137:2379, <span class="token boolean">false</span>
26788b649bce5709, started, etcd-n2, http://10.0.0.138:2380, http://10.0.0.138:2379, <span class="token boolean">false</span>
510527ca792cc2da, started, etcd-n3, http://10.0.0.139:2380, http://10.0.0.139:2379, <span class="token boolean">false</span>
</code></pre></div><p>æŸ¥çœ‹å¥åº·çŠ¶æ€ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> etcd etcdctl --write-out<span class="token operator">=</span>table <span class="token parameter variable">--endpoints</span><span class="token operator">=</span><span class="token string">&quot;http://10.0.0.137:2379,http://10.0.0.138:2379,http://10.0.0.139:2379&quot;</span> endpoint  health

<span class="token comment"># å¾—åˆ°</span>
http://10.0.0.138:2379 is healthy: successfully committed proposal: took <span class="token operator">=</span> <span class="token number">11</span>.12227ms
http://10.0.0.139:2379 is healthy: successfully committed proposal: took <span class="token operator">=</span> <span class="token number">11</span>.674569ms
http://10.0.0.137:2379 is healthy: successfully committed proposal: took <span class="token operator">=</span> <span class="token number">11</span>.993285ms


<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> etcd etcdctl --write-out<span class="token operator">=</span>table <span class="token parameter variable">--endpoints</span><span class="token operator">=</span><span class="token string">&quot;http://etcd1.example.com:2379,http://etcd2.example.com:2379,http://etcd3.example.com:2379&quot;</span> endpoint  health

<span class="token comment"># å¾—åˆ°</span>
+--------------------------+--------+------------+-------+
<span class="token operator">|</span>         ENDPOINT         <span class="token operator">|</span> HEALTH <span class="token operator">|</span>    TOOK    <span class="token operator">|</span> ERROR <span class="token operator">|</span>
+--------------------------+--------+------------+-------+
<span class="token operator">|</span> http://etcd1.example.com:2379 <span class="token operator">|</span>   <span class="token boolean">true</span> <span class="token operator">|</span> <span class="token number">8</span>.615217ms <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> http://etcd3.example.com:2379 <span class="token operator">|</span>   <span class="token boolean">true</span> <span class="token operator">|</span>  <span class="token number">8</span>.97122ms <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> http://etcd2.example.com:2379 <span class="token operator">|</span>   <span class="token boolean">true</span> <span class="token operator">|</span> <span class="token number">9</span>.323943ms <span class="token operator">|</span>       <span class="token operator">|</span>
+--------------------------+--------+------------+-------+
</code></pre></div><h2 id="æ•°æ®"><a href="#æ•°æ®" class="header-anchor">#</a> æ•°æ®</h2> <h3 id="crud"><a href="#crud" class="header-anchor">#</a> CRUD</h3> <p><code>node1</code> è®¾ç½®ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> etcd etcdctl put /testdir/testkey <span class="token string">&quot;Hello world&quot;</span>
</code></pre></div><p><code>node3</code> è¯»å–ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> etcd etcdctl get /testdir/testkey

<span class="token comment"># å¾—åˆ°</span>
/testdir/testkey
Hello world
</code></pre></div><h3 id="watch"><a href="#watch" class="header-anchor">#</a> WATCH</h3> <p><code>node2</code> ç›‘å¬ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> etcd etcdctl <span class="token function">watch</span> hi 
</code></pre></div><p><code>node3</code> è®¾ç½®ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> etcd etcdctl put hi shanyuhai
</code></pre></div><p><code>node2</code> ä¼šå¾—åˆ°å“åº”ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>PUT
hi
shanyuhai
</code></pre></div><h2 id="å¤„ç†é—®é¢˜"><a href="#å¤„ç†é—®é¢˜" class="header-anchor">#</a> å¤„ç†é—®é¢˜</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> logs etcd
</code></pre></div><table><thead><tr><th>æ—¥å¿—</th> <th>è¯´æ˜</th></tr></thead> <tbody><tr><td><code>health check for peer xxx could not connect: dial tcp IP:2380: getsockopt: connection refused</code></td> <td>æ— æ³•å»ºç«‹ä¸è¿™ä¸ª IP çš„ 2380 ç«¯å£è¿›è¡Œè¿æ¥ã€‚æ£€æŸ¥ etcd å®¹å™¨æ˜¯å¦åœ¨é‚£ä¸ª IP çš„ä¸»æœºä¸Šè¿è¡Œã€‚</td></tr> <tr><td><code>xxx is starting a new election at term x</code></td> <td>etcd é›†ç¾¤å·²ç»å¤±å»äº†æ³•å®šäººæ•°ï¼Œæ­£åœ¨å°è¯•å»ºç«‹æ–°çš„é¢†å¯¼è€…ã€‚å½“å¤§å¤šæ•°è¿è¡Œ etcd çš„èŠ‚ç‚¹å‡ºç°æ•…éšœæˆ–æ— æ³•è®¿é—®æ—¶ï¼Œå¯èƒ½ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚</td></tr> <tr><td><code>connection error: desc = &quot;transport: Error while dialing dial tcp 0.0.0.0:2379: i/o timeout&quot;; Reconnecting to {0.0.0.0:2379 0 &lt;nil&gt;}</code></td> <td>ä¸»æœºé˜²ç«å¢™é˜»æ­¢äº†ç½‘ç»œé€šä¿¡ã€‚</td></tr> <tr><td><code>rafthttp: request cluster ID mismatch</code></td> <td>è¿è¡Œç€ etcd å®ä¾‹å¹¶è®°å½•<code>rafthttp: request cluster ID mismatch</code>çš„èŠ‚ç‚¹æ­£åœ¨å°è¯•åŠ å…¥å¦ä¸€ä¸ªç”±å…¶ä»–æˆå‘˜æ„æˆçš„é›†ç¾¤ã€‚åº”è¯¥ä»é›†ç¾¤ä¸­åˆ é™¤è¿™ä¸ªèŠ‚ç‚¹ï¼Œç„¶åé‡æ–°æ·»åŠ ã€‚</td></tr> <tr><td><code>rafthttp: failed to find member</code></td> <td>é›†ç¾¤çŠ¶æ€ (<code>/var/lib/etcd</code>) åŒ…å«é”™è¯¯ä¿¡æ¯ï¼Œæ— æ³•åŠ å…¥é›†ç¾¤ã€‚åº”è¯¥ä»é›†ç¾¤ä¸­åˆ é™¤è¿™ä¸ªèŠ‚ç‚¹ï¼Œå¹¶åˆ é™¤çŠ¶æ€ç›®å½•ï¼Œç„¶åé‡æ–°æ·»åŠ ã€‚</td></tr></tbody></table></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/minboo/docs/edit/master/docs/backend/docker/etcd.md" target="_blank" rel="noopener noreferrer">ç¼–è¾‘æ–‡æ¡£ï¼</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">å‡ ç§’å‰</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/backend/docker/docker-compose.html" class="prev">
        Docker Compose ç®¡ç†å¤šä¸ªæœåŠ¡
      </a></span> <span class="next"><a href="/backend/docker/private-registry.html">
        ä½¿ç”¨ Harbor æ„å»ºç§æœ‰é•œåƒä»“åº“
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.05d870f8.js" defer></script><script src="/assets/js/2.8154945c.js" defer></script><script src="/assets/js/18.b4b40293.js" defer></script><script src="/assets/js/3.4234061e.js" defer></script>
  </body>
</html>
